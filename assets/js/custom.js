const milliInSecond=1e3,milliInMinute=6e4,milliInHour=36e5,milliInDay=864e5,countdownTimeoutDur=250;let countdownTextState="Loading...";const registerServiceWorker=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/serviceWorker.js");t.installing?console.log("Service worker installing"):t.waiting?console.log("Service worker installed"):t.active&&console.log("Service worker active")}catch(t){console.error(`Registration failed with ${t}`)}},highlightHtml=t=>`<span class="secondary opacity-80">${t}</span>`,calcDiffInMilli=t=>{let e=t-Date.now();return e<0?Math.abs(e)<144e5?{status:"live",milli:0}:{status:"over",milli:0}:{status:"countdown",milli:e}},calculateCountdown=(t,e)=>{if(isNaN(t))return void updateCountdownText("");const n=calcDiffInMilli(t);if("countdown"!=n.status){if("live"==n.status){let t='<span class="flip-x">ðŸŽ‰</span> It is happening right now! ðŸŽ‰';!0===e.hasVirtualMeetup&&(t+="<br/>",t+=`<a href="${e.discordLink}" target="_blank" rel="noopener noreferrer">Click to join the virtual event</a>`),updateCountdownText(highlightHtml(t))}if("over"==n.status){updateCountdownText(highlightHtml("The event is over, join us next year!"));const t=document.getElementById("event-planned"),e=document.getElementById("event-unplanned");t.classList.toggle("hidden"),e.classList.toggle("hidden")}return}let i=n.milli;const o=[],a=Math.floor(i/864e5);a>0&&(o.push(`${a}${highlightHtml(" days")}`),i-=864e5*a);const l=Math.floor(i/36e5);l>0&&(o.push(`${l}${highlightHtml(" hours")}`),i-=36e5*l);const s=Math.floor(i/6e4);s>0&&(o.push(`${s}${highlightHtml(" minutes")}`),i-=6e4*s);const r=Math.floor(i/1e3);o.push(`${r}${highlightHtml(" seconds")}`);const c=o.join('<span class="opacity-80"> - </span>');updateCountdownText(c),setTimeout((()=>{calculateCountdown(t,e)}),250)},initVideo=()=>{const t=document.getElementById("banner-bg");if(null==t)return;const e=document.createElement("video");e.src="/assets/vid/banner.mp4",e.classList="opacity-transition-1s opacity-0",e.muted=!0,e.autoplay=!0,e.loop=!0,e.disablePictureInPicture=!0,e.controls=!1,e.draggable=!1,e.oncanplay=function(){e.classList.remove("opacity-0")},t.appendChild(e)},updateCountdownText=t=>{if(countdownTextState==t)return;countdownTextState=t;const e=document.getElementById("countdown");null!=e&&(e.innerHTML=t)},pageSetup=()=>{const t=window.siteData.nextEventDate,e=new Date(t);registerServiceWorker(),calculateCountdown(e,window.siteData),setTimeout((()=>initVideo()),250)};pageSetup();
