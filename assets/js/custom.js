const milliInSecond=1e3,milliInMinute=6e4,milliInHour=36e5,milliInDay=864e5,countdownTimeoutDur=250;let countdownTextState="Loading...";const registerServiceWorker=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/serviceWorker.js");t.installing?console.log("Service worker installing"):t.waiting?console.log("Service worker installed"):t.active&&console.log("Service worker active")}catch(t){console.error(`Registration failed with ${t}`)}},highlightHtml=t=>`<span class="secondary opacity-80">${t}</span>`,calcDiffInMilli=t=>{let e=t-Date.now();return e<0?Math.abs(e)<144e5?{status:"live",milli:0}:{status:"over",milli:0}:{status:"countdown",milli:t-Date.now()}},calculateCountdown=t=>{if(isNaN(t))return void updateCountdownText("");const e=calcDiffInMilli(t);if("countdown"!=e.status){if("live"==e.status&&updateCountdownText(highlightHtml('<span class="flip-x">ðŸŽ‰</span> It is happening right now! ðŸŽ‰')),"over"==e.status){updateCountdownText(highlightHtml("The event is over, join us next year!"));const t=document.getElementById("event-planned"),e=document.getElementById("event-unplanned");t.classList.toggle("hidden"),e.classList.toggle("hidden")}return}let n=e.milli;const o=[],i=Math.floor(n/864e5);i>0&&(o.push(`${i}${highlightHtml(" days")}`),n-=864e5*i);const l=Math.floor(n/36e5);l>0&&(o.push(`${l}${highlightHtml(" hours")}`),n-=36e5*l);const s=Math.floor(n/6e4);s>0&&(o.push(`${s}${highlightHtml(" minutes")}`),n-=6e4*s);const a=Math.floor(n/1e3);o.push(`${a}${highlightHtml(" seconds")}`);const c=o.join('<span class="opacity-80"> - </span>');updateCountdownText(c),setTimeout((()=>{calculateCountdown(t)}),250)},initVideo=()=>{const t=document.getElementById("banner-bg");if(null==t)return;const e=document.createElement("video");e.src="/assets/vid/banner.mp4",e.classList="opacity-transition-1s opacity-0",e.muted=!0,e.autoplay=!0,e.loop=!0,e.oncanplay=function(){e.classList.remove("opacity-0")},t.appendChild(e),setTimeout((()=>e.play()),1e3)},updateCountdownText=t=>{if(countdownTextState==t)return;const e=document.getElementById("countdown");null!=e&&(e.innerHTML=t)},pageSetup=()=>{const t=window.siteData.nextEventDate,e=new Date(t);initVideo(),registerServiceWorker(),calculateCountdown(e)};pageSetup();
